var L=Object.defineProperty,T=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var $=(s,n,e)=>n in s?L(s,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[n]=e,b=(s,n)=>{for(var e in n||(n={}))R.call(n,e)&&$(s,e,n[e]);if(_)for(var e of _(n))W.call(n,e)&&$(s,e,n[e]);return s},j=(s,n)=>T(s,M(n));import{g as A,r as p}from"./vendor.a8fce7af.js";import{j as t,a as u,R as I}from"./index.c5b6eee6.js";function w(){return t("div",{children:"Error404"})}function P(){return A("categories",async()=>await(await fetch("https://opentdb.com/api_category.php")).json(),{refetchOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0})}const U=s=>{var a;const{category:n,difficulty:e}=s,{data:c}=P();console.log(c);const d=n===""?"":(a=c==null?void 0:c.trivia_categories.find(m=>m.name==n))==null?void 0:a.id;return A("questions",async()=>{console.log(d,e);const r=await(await fetch(`https://opentdb.com/api.php?amount=10&category=${d}&difficulty=${e}`)).json();return console.log(r),r},{refetchOnWindowFocus:!1,staleTime:1/0})};function H({changePage:s,getFullData:n}){var f;const[e,c]=p.exports.useState({category:"",difficulty:""}),d=o=>{o.preventDefault(),n(e),console.log("Form Submitted"),s()},h=o=>{c(y=>j(b({},y),{[o.target.name]:o.target.value}))},{isLoading:a,data:m,error:r}=P();return a?"Loading...":r?t(w,{}):u("div",{className:"h-[calc(100vh_-_116px)] w-3/4 mx-auto mt-8",children:[t("h3",{className:"text-xl font-bold",children:"Quiz Setup"}),u("form",{onSubmit:o=>d(o),children:[u("div",{className:"mt-4",children:[t("label",{className:"mr-4",htmlFor:"category",children:"Category"}),u("select",{className:"border rounded text-sm w-2/4",name:"category",id:"category",onChange:o=>h(o),children:[t("option",{id:1,value:"",children:"Any"}),(f=m==null?void 0:m.trivia_categories)==null?void 0:f.map(o=>t("option",{id:o.id,value:o.name,children:o.name},o.id))]})]}),u("div",{className:"mt-4",children:[t("label",{className:"mr-4",htmlFor:"difficuly",children:"Difficulty"}),u("select",{className:"border rounded text-sm w-2/4",name:"difficulty",id:"difficulty",placeholder:"Select",onChange:o=>h(o),children:[t("option",{value:"",children:"Any"}),t("option",{value:"easy",children:"Easy"}),t("option",{value:"medium",children:"Medium"}),t("option",{value:"hard",children:"Hard"})]})]}),t("button",{type:"submit",className:"mt-4 px-4 py-2 rounded bg-green-500 text-white hover:bg-green-600",children:"Start Quiz"})]})]})}function B({changePage:s,data:n}){var N,S,C,O,F,Q;const[e,c]=p.exports.useState(0),[d,h]=p.exports.useState([]),[a,m]=p.exports.useState([]),{data:r,isLoading:f,isError:o,isFetching:y}=U(n.data[0]),k=()=>{var g;const i=(g=r==null?void 0:r.results)==null?void 0:g.map(l=>[l.correct_answer,...l.incorrect_answers].sort(()=>1-Math.random()*2));i&&h(l=>[...i])};p.exports.useEffect(()=>{k()},[r]);const E=i=>{const g={count:e+1,userAnswer:i.target.innerText};m(l=>[...l,g])},v=i=>i.replace(/(&quot\;)/g,'"').replace(/(&#039\;)/g,"'").replace(/(&amp\;)/g,"&"),z=()=>{let i=1,g=a.reverse().map(()=>{let l=a.find(x=>x.count===i);return i++,l}).filter(l=>l!==void 0);n.getFullData({questionsData:r,resultsArray:g,options:d})};return f?t("div",{children:"Loading..."}):y?t("div",{children:"Please Wait..."}):o?t(w,{}):u("div",{className:"container mx-auto w-[90%] sm:w-4/5 mt-8 h-[calc(100vh_-_118px)] p-4",children:[u("div",{className:"flex items-start gap-4 my-4 py-2 px-4",children:[u("p",{className:"text-lg font-bold",children:["Topic:"," ",t("span",{className:"font-medium text-lg",children:(N=r==null?void 0:r.results[e])==null?void 0:N.category})]}),t("span",{className:`py-1 px-3 mt-1 ${((S=r==null?void 0:r.results[e])==null?void 0:S.difficulty)=="easy"?"bg-green-600":((C=r==null?void 0:r.results[e])==null?void 0:C.difficulty)=="medium"?"bg-orange-400":"bg-red-500"} text-xs font-bold text-white rounded-sm align-middle capitalize`,children:(O=r==null?void 0:r.results[e])==null?void 0:O.difficulty})]}),t("p",{className:"mb-5",children:`${e+1}) `+v((F=r==null?void 0:r.results[e])==null?void 0:F.question)}),t("ul",{children:d&&((Q=d[e])==null?void 0:Q.map((i,g)=>{var l;return t("li",{className:`p-2 ml-3 w-full sm:w-3/4 lg:w-1/3 mb-4 border-2 rounded cursor-pointer
                  ${((l=a==null?void 0:a[a.length-1])==null?void 0:l.userAnswer)===i&&"bg-green-500 text-white"}`,onClick:x=>E(x),children:v(i)},e+g)}))}),u("div",{className:"flex justify-between items-center p-3",children:[u("div",{className:"flex gap-4",children:[t("button",{className:`px-4 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-700 ${e<=0&&"hidden"}`,onClick:()=>c(i=>i-1),children:"Prev"}),t("button",{className:`px-4 py-1 bg-blue-500 text-white rounded hover:bg-blue-700 ${e>=9&&"hidden"}`,onClick:()=>c(i=>i+1),children:"Next"})]}),e>=9&&t("button",{className:"px-4 py-1 bg-red-500 text-white rounded hover:bg-red-700",onClick:()=>{confirm("Are you sure?")&&(z(),s())},children:"Submit"})]})]})}function V(){const[s,n]=p.exports.useState(1),[e,c]=p.exports.useState([]),d=a=>{c(m=>[...m,b({},a)])},h=()=>{n(a=>a+1)};switch(s){case 1:return t(H,{changePage:h,getFullData:d});case 2:return t(B,{changePage:h,data:{data:e,getFullData:d}});case 3:return t(I,{data:{data:e,setData:c}});default:return t(w,{})}}export{V as default};
